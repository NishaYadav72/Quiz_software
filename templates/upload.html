{% extends "base.html" %}

{% block title %}Upload File{% endblock %}

{% block content %}
<div class="w-full min-h-screen flex items-center justify-center bg-gradient-to-tr from-gray-900 via-indigo-800 to-pink-900 px-4 relative overflow-hidden">

    <!-- Soft animated circles -->
    <div class="absolute top-0 left-1/4 w-64 h-64 bg-pink-600/20 rounded-full blur-2xl animate-pulse"></div>
    <div class="absolute bottom-0 right-1/3 w-96 h-96 bg-blue-500/20 rounded-full blur-3xl animate-pulse"></div>

    <!-- Upload Card -->
    <form method="POST" enctype="multipart/form-data" 
          class="relative z-10 max-w-md w-full bg-gray-800/80 backdrop-blur-md p-8 rounded-2xl shadow-2xl border border-white/10 animate-fadeIn">

        {% csrf_token %}

        <h2 class="text-3xl font-bold text-cyan-400 mb-6 text-center drop-shadow-md">
            Upload Your File
        </h2>

        <!-- Instructions -->
        <p class="text-gray-300 text-center mb-6 text-sm">
            Upload PDF, Image, or Video. Max size: 20MB.
        </p>

        <!-- File Input -->
        <div class="flex flex-col items-center space-y-4 mb-6">
            {% for field in form %}
                {% if field.field.widget.input_type == "file" %}
                <div class="w-full text-center">
                    <input type="file" name="{{ field.name }}" id="{{ field.id_for_label }}" class="hidden" onchange="updateFileName(this)">
                    
                    <!-- Choose File Button -->
                    <label for="{{ field.id_for_label }}"
                           class="inline-block px-10 py-3 bg-purple-600 text-white font-semibold rounded-full shadow hover:bg-purple-500 transition duration-300">
                        Select File
                    </label>

                    <p id="{{ field.id_for_label }}_name" class="mt-2 text-gray-400 text-sm">No file chosen</p>

                    {% if field.errors %}
                    <p class="text-red-400 mt-1 text-sm">{{ field.errors }}</p>
                    {% endif %}
                </div>
                {% else %}
                <div class="w-full mb-4">
                    <label for="{{ field.id_for_label }}" class="text-gray-100 font-medium mb-1">{{ field.label }}</label>
                    {{ field }}
                    {% if field.errors %}
                    <p class="text-red-400 mt-1 text-sm">{{ field.errors }}</p>
                    {% endif %}
                </div>
                {% endif %}
            {% endfor %}
        </div>

        <!-- Upload Button -->
        <div class="text-center">
            <button type="submit"
                    class="px-12 py-3 bg-gradient-to-r from-cyan-400 to-blue-600 text-white font-bold rounded-full shadow-lg hover:scale-105 hover:shadow-[0_0_25px_cyan] transition duration-300">
                Upload Now
            </button>
        </div>

    </form>

</div>
{% endblock %}

{% block extra_css %}
<style>
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}
.animate-fadeIn {
    animation: fadeIn 0.8s ease-out;
}

/* Inputs styling */
form input[type="text"], form select, form textarea {
    padding: 0.75rem 1rem;
    border-radius: 0.75rem;
    background-color: rgba(40,40,40,0.7);
    border: 1px solid #22d3ee; /* cyan */
    color: white;
    outline: none;
}
form input[type="text"]:focus, form select:focus, form textarea:focus {
    border-color: #06b6d4; /* cyan-500 */
    box-shadow: 0 0 8px #06b6d4;
}

/* Cursor pointer for file label */
label[for^="id_"] {
    cursor: pointer;
}
</style>

<script>
function updateFileName(input) {
    const fileName = input.files.length ? input.files[0].name : "No file chosen";
    document.getElementById(input.id + "_name").innerText = fileName;
}
</script>
{% endblock %}
